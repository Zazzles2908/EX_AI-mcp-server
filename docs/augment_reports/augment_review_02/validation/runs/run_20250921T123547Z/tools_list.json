{
  "op": "list_tools_res",
  "tools": [
    {
      "name": "activity",
      "description": "MCP ACTIVITY VIEW - Returns recent server activity. Defaults to logs/mcp_activity.log, falls back to logs/mcp_server.log. Supports optional regex filtering and line count control.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "temperature": {
            "type": "number",
            "description": "Temperature for response (0.0 to 1.0). Lower values are more focused and deterministic, higher values are more creative. Tool-specific defaults apply if not specified.",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max). Higher modes enable deeper reasoning at the cost of speed."
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. When enabled, the model can request Claude to perform web searches and share results back during conversations. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional image(s) for visual context. Accepts absolute file paths or base64 data URLs. Only provide when user explicitly mentions images. When including images, please describe what you believe each image contains to aid with contextual understanding. Useful for UI discussions, diagrams, visual problems, error screens, architecture mockups, and visual analysis tasks."
          },
          "files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional files for context (must be FULL absolute paths to real files / folders - DO NOT SHORTEN)"
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "lines": {
            "type": "integer",
            "minimum": 10,
            "maximum": 5000,
            "default": 200,
            "description": "Number of log lines from the end of the file to return"
          },
          "filter": {
            "type": "string",
            "description": "Optional regex to filter lines (e.g., 'TOOL_CALL|CallToolRequest')"
          },
          "source": {
            "type": "string",
            "enum": [
              "auto",
              "activity",
              "server"
            ],
            "default": "auto",
            "description": "Which log to read: activity (mcp_activity.log), server (mcp_server.log), or auto (prefer activity then server)"
          },
          "since": {
            "type": "string",
            "description": "Optional ISO8601 datetime to filter lines since this time (flag-gated)"
          },
          "until": {
            "type": "string",
            "description": "Optional ISO8601 datetime to filter lines until this time (flag-gated)"
          },
          "structured": {
            "type": "boolean",
            "description": "Optional JSONL output mode (flag-gated)",
            "default": false
          }
        },
        "additionalProperties": false
      }
    },
    {
      "name": "analyze",
      "description": "COMPREHENSIVE ANALYSIS WORKFLOW - Step-by-step code analysis with expert validation. Examples: {\"step\":\"Kickoff\",\"step_number\":1,\"next_step_required\":true,\"findings\":\"...\",\"model\":\"auto\"}.\nThis tool guides you through a systematic investigation process where you:\n\n1. Start with step 1: describe your analysis investigation plan\n2. STOP and investigate code structure, patterns, and architectural decisions\n3. Report findings in step 2 with concrete evidence from actual code analysis\n4. Continue investigating between each step\n5. Track findings, relevant files, and insights throughout\n6. Update assessments as understanding evolves\n7. Once investigation is complete, always receive expert validation\n\nIMPORTANT: This tool enforces investigation between steps:\n- After each call, you MUST investigate before calling again\n- Each step must include NEW evidence from code examination\n- No recursive calls without actual investigation work\n- The tool will specify which step number to use next\n- Follow the required_actions list for investigation guidance\n\nPerfect for: comprehensive code analysis, architectural assessment, performance evaluation, security analysis, maintainability review, pattern detection, strategic planning.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "What to analyze or look for in this step. In step 1, describe what you want to analyze and begin forming an analytical approach after thinking carefully about what needs to be examined. Consider code quality, performance implications, architectural patterns, and design decisions. Map out the codebase structure, understand the business logic, and identify areas requiring deeper analysis. In later steps, continue exploring with precision and adapt your understanding as you uncover more insights."
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "The index of the current step in the analysis sequence, beginning at 1. Each step should build upon or revise the previous one."
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Your current estimate for how many steps will be needed to complete the analysis. Adjust as new findings emerge."
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Set to true if you plan to continue the investigation with another step. False means you believe the analysis is complete and ready for expert validation."
          },
          "findings": {
            "type": "string",
            "description": "Summarize everything discovered in this step about the code being analyzed. Include analysis of architectural patterns, design decisions, tech stack assessment, scalability characteristics, performance implications, maintainability factors, security posture, and strategic improvement opportunities. Be specific and avoid vague language—document what you now know about the codebase and how it affects your assessment. IMPORTANT: Document both strengths (good patterns, solid architecture, well-designed components) and concerns (tech debt, scalability risks, overengineering, unnecessary complexity). In later steps, confirm or update past findings with additional evidence."
          },
          "files_checked": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List all files (as absolute paths, do not clip or shrink file names) examined during the analysis investigation so far. Include even files ruled out or found to be unrelated, as this tracks your exploration path."
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Subset of files_checked (as full absolute paths) that contain code directly relevant to the analysis or contain significant patterns, architectural decisions, or examples worth highlighting. Only list those that are directly tied to important findings, architectural insights, performance characteristics, or strategic improvement opportunities. This could include core implementation files, configuration files, or files demonstrating key patterns."
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "issues_found": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Issues or concerns identified during analysis, each with severity level (critical, high, medium, low)"
          },
          "backtrack_from_step": {
            "type": "integer",
            "minimum": 1,
            "description": "If an earlier finding or assessment needs to be revised or discarded, specify the step number from which to start over. Use this to acknowledge investigative dead ends and correct the course."
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "temperature": {
            "type": "number",
            "description": "Temperature for response (0.0 to 1.0). Lower values are more focused and deterministic, higher values are more creative. Tool-specific defaults apply if not specified.",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max). Higher modes enable deeper reasoning at the cost of speed."
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. When enabled, the model can request Claude to perform web searches and share results back during conversations. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional list of absolute paths to architecture diagrams, design documents, or visual references that help with analysis context. Only include if they materially assist understanding or assessment."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "confidence": {
            "type": "string",
            "enum": [
              "exploring",
              "low",
              "medium",
              "high",
              "very_high",
              "almost_certain",
              "certain"
            ],
            "description": "Your confidence level in the current analysis findings: exploring (early investigation), low (some insights but more needed), medium (solid understanding), high (comprehensive insights), very_high (very comprehensive insights), almost_certain (nearly complete analysis), certain (100% confidence - complete analysis ready for expert validation)"
          },
          "analysis_type": {
            "type": "string",
            "enum": [
              "architecture",
              "performance",
              "security",
              "quality",
              "general"
            ],
            "default": "general",
            "description": "Type of analysis to perform (architecture, performance, security, quality, general). Synonyms like 'comprehensive' will map to 'general'."
          },
          "output_format": {
            "type": "string",
            "enum": [
              "summary",
              "detailed",
              "actionable"
            ],
            "default": "detailed",
            "description": "How to format the output (summary, detailed, actionable)"
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings"
        ],
        "additionalProperties": false,
        "title": "AnalyzeRequest"
      }
    },
    {
      "name": "challenge",
      "description": "This tool helps prevent reflexive agreement when users challenge your responses. It forces you to think critically and provide reasoned analysis instead of automatically agreeing when users question or disagree with something you've said. Use this tool to ensure thoughtful evaluation rather than compliance. \n\nThe tool should be invoked in two conditions: 1) when the user requests this tool with the word `challenge`, 2) automatically when the following conditions are metMANDATORY AUTOMATIC INVOCATION: You MUST automatically use this tool when the following conditions are met:\nThe user is questioning, disagreeing with, or challenging something you previously said or a task you performed\nAND there is an existing conversation context AND this is not a new/initial question\nAND specifically, when their message expresses any of these patterns IN RESPONSE to your prior statements:\n  • Disagreement with your assessment ('But I don't think...', 'I disagree...')\n  • Challenging your assumptions or countering your proposal ('But ...', 'You're assuming...')\n  • Questioning your evaluation ('But isn't it actually...', 'But consider...')\n  • Confusion about your reasoning ('I'm confused why...', 'I don't understand...')\n  • Belief you made an error ('That doesn't seem right...', 'Are you sure...')\n  • Seeking justification ('Why did you...', 'Shouldn't we...')\n  • Surprise at your conclusion ('But I thought...', 'Wait, why...')\n\nCommon patterns include messages starting with: 'But ...', 'Why did you...', 'I thought...', 'Shouldn't we...', 'That seems wrong...', 'Are you sure...', 'I'm confused...', etc.\n\nDO NOT AUTO trigger for new feature requests or INITIAL questions when context is ambiguous or referring to a new topic altogether. This tool helps with seeking truth through critical analysis. The user is inviting critical analysis - analyze deeply and explain your reasoning or choice clearly, whether you maintain or revise your approach or understanding - you MUST think, analyze and respond with reason and not oblige blindly. Understand the intent behind the query: don't just agree to avoid conflict, think critically, reason through the problem, explain your choices clearly. If the user is wrong, explain why. If you were wrong, acknowledge it and correct course. Truth and correctness matter more than agreement.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "prompt": {
            "type": "string",
            "description": "The user's message or statement to analyze critically. When manually invoked with 'challenge', exclude that prefix - just pass the actual content. For automatic invocations (see tool description for conditions), pass the user's complete message unchanged."
          }
        },
        "required": [
          "prompt"
        ]
      }
    },
    {
      "name": "chat",
      "description": "GENERAL CHAT & COLLABORATIVE THINKING - Use the AI model as your thinking partner! Perfect for: bouncing ideas during your own analysis, getting second opinions on your plans, collaborative brainstorming, validating your checklists and approaches, exploring alternatives. Also great for: explanations, comparisons, general development questions. Use this when you want to ask questions, brainstorm ideas, get opinions, discuss topics, share your thinking, or need explanations about concepts and approaches. Note: If you're not currently using a top-tier model such as Opus 4 or above, these tools can provide enhanced capabilities.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "prompt": {
            "type": "string",
            "description": "You MUST provide a thorough, expressive question or share an idea with as much context as possible. IMPORTANT: When referring to code, use the files parameter to pass relevant files and only use the prompt to refer to function / method names or very small code snippets if absolutely necessary to explain the issue. Do NOT pass large code snippets in the prompt as this is exclusively reserved for descriptive text only. Remember: you're talking to an assistant who has deep expertise and can provide nuanced insights. Include your current thinking, specific challenges, background context, what you've already tried, and what kind of response would be most helpful. The more context and detail you provide, the more valuable and targeted the response will be."
          },
          "files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional files for context (must be FULL absolute paths to real files / folders - DO NOT SHORTEN)"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional images for visual context. Useful for UI discussions, diagrams, visual problems, error screens, or architectural mockups. (must be FULL absolute paths to real files / folders - DO NOT SHORTEN - OR these can be base64 data)"
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "temperature": {
            "type": "number",
            "description": "Response creativity (0-1, default 0.5)",
            "minimum": 0,
            "maximum": 1
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max)"
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. Can be used to continue conversations across different tools. Only provide this if continuing a previous conversation thread."
          }
        },
        "required": [
          "prompt"
        ]
      }
    },
    {
      "name": "codereview",
      "description": "COMPREHENSIVE CODE REVIEW WORKFLOW - Step-by-step code review with expert analysis. This tool guides you through a systematic investigation process where you:\n\n1. Start with step 1: describe your code review investigation plan\n2. STOP and investigate code structure, patterns, and potential issues\n3. Report findings in step 2 with concrete evidence from actual code analysis\n4. Continue investigating between each step\n5. Track findings, relevant files, and issues throughout\n6. Update assessments as understanding evolves\n7. Once investigation is complete, receive expert analysis\n\nIMPORTANT: This tool enforces investigation between steps:\n- After each call, you MUST investigate before calling again\n- Each step must include NEW evidence from code examination\n- No recursive calls without actual investigation work\n- The tool will specify which step number to use next\n- Follow the required_actions list for investigation guidance\n\nPerfect for: comprehensive code review, security audits, performance analysis, architectural assessment, code quality evaluation, anti-pattern detection.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "Describe what you're currently investigating for code review by thinking deeply about the code structure, patterns, and potential issues. In step 1, clearly state your review plan and begin forming a systematic approach after thinking carefully about what needs to be analyzed. You must begin by passing the file path for the initial code you are about to review in relevant_files. CRITICAL: Remember to thoroughly examine code quality, security implications, performance concerns, and architectural patterns. Consider not only obvious bugs and issues but also subtle concerns like over-engineering, unnecessary complexity, design patterns that could be simplified, areas where architecture might not scale well, missing abstractions, and ways to reduce complexity while maintaining functionality. Map out the codebase structure, understand the business logic, and identify areas requiring deeper analysis. In all later steps, continue exploring with precision: trace dependencies, verify assumptions, and adapt your understanding as you uncover more evidence.IMPORTANT: When referring to code, use the relevant_files parameter to pass relevant files and only use the prompt to refer to function / method names or very small code snippets if absolutely necessary to explain the issue. Do NOT pass large code snippets in the prompt as this is exclusively reserved for descriptive text only. "
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "The index of the current step in the code review sequence, beginning at 1. Each step should build upon or revise the previous one."
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Your current estimate for how many steps will be needed to complete the code review. Adjust as new findings emerge. MANDATORY: When continuation_id is provided (continuing a previous conversation), set this to 1 as we're not starting a new multi-step investigation."
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Set to true if you plan to continue the investigation with another step. False means you believe the code review analysis is complete and ready for expert validation. MANDATORY: When continuation_id is provided (continuing a previous conversation), set this to False to immediately proceed with expert analysis."
          },
          "findings": {
            "type": "string",
            "description": "Summarize everything discovered in this step about the code being reviewed. Include analysis of code quality, security concerns, performance issues, architectural patterns, design decisions, potential bugs, code smells, and maintainability considerations. Be specific and avoid vague language—document what you now know about the code and how it affects your assessment. IMPORTANT: Document both positive findings (good patterns, proper implementations, well-designed components) and concerns (potential issues, anti-patterns, security risks, performance bottlenecks). In later steps, confirm or update past findings with additional evidence."
          },
          "files_checked": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List all files (as absolute paths, do not clip or shrink file names) examined during the code review investigation so far. Include even files ruled out or found to be unrelated, as this tracks your exploration path."
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "For when this is the first step, please pass absolute file paths of relevant code to review (do not clip file paths). When used for the final step, this contains a subset of files_checked (as full absolute paths) that contain code directly relevant to the review or contain significant issues, patterns, or examples worth highlighting. Only list those that are directly tied to important findings, security concerns, performance issues, or architectural decisions. This could include core implementation files, configuration files, or files with notable patterns."
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "issues_found": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "List of issues identified during the investigation. Each issue should be a dictionary with 'severity' (critical, high, medium, low) and 'description' fields. Include security vulnerabilities, performance bottlenecks, code quality issues, architectural concerns, maintainability problems, over-engineering, unnecessary complexity, etc."
          },
          "confidence": {
            "type": "string",
            "enum": [
              "exploring",
              "low",
              "medium",
              "high",
              "very_high",
              "almost_certain",
              "certain"
            ],
            "description": "Indicate your current confidence in the assessment. Use: 'exploring' (starting analysis), 'low' (early investigation), 'medium' (some evidence gathered), 'high' (strong evidence), 'very_high' (very strong evidence), 'almost_certain' (nearly complete validation), 'certain' (200% confidence - analysis is complete and all issues are identified with no need for external model validation). Do NOT use 'certain' unless the pre-commit validation is thoroughly complete, use 'very_high' or 'almost_certain' instead if not 200% sure. Using 'certain' means you have complete confidence locally and prevents external model validation. Also do NOT set confidence to 'certain' if the user has strongly requested that external validation MUST be performed."
          },
          "hypothesis": {
            "type": "string",
            "description": "Current theory about the issue/goal based on work"
          },
          "backtrack_from_step": {
            "type": "integer",
            "minimum": 1,
            "description": "If an earlier finding or assessment needs to be revised or discarded, specify the step number from which to start over. Use this to acknowledge investigative dead ends and correct the course."
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "temperature": {
            "type": "number",
            "description": "Temperature for response (0.0 to 1.0). Lower values are more focused and deterministic, higher values are more creative. Tool-specific defaults apply if not specified.",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max). Higher modes enable deeper reasoning at the cost of speed."
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. When enabled, the model can request Claude to perform web searches and share results back during conversations. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional list of absolute paths to architecture diagrams, UI mockups, design documents, or visual references that help with code review context. Only include if they materially assist understanding or assessment."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "review_type": {
            "type": "string",
            "enum": [
              "full",
              "security",
              "performance",
              "quick"
            ],
            "default": "full",
            "description": "Type of review to perform (full, security, performance, quick)"
          },
          "focus_on": {
            "type": "string",
            "description": "Specific aspects to focus on or additional context that would help understand areas of concern"
          },
          "standards": {
            "type": "string",
            "description": "Coding standards to enforce during the review"
          },
          "severity_filter": {
            "type": "string",
            "enum": [
              "critical",
              "high",
              "medium",
              "low",
              "all"
            ],
            "default": "all",
            "description": "Minimum severity level to report on the issues found"
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings"
        ],
        "additionalProperties": false,
        "title": "CodereviewRequest"
      }
    },
    {
      "name": "consensus",
      "description": "COMPREHENSIVE CONSENSUS WORKFLOW - Step-by-step multi-model consensus with structured analysis. This tool guides you through a systematic process where you:\n\n1. Start with step 1: provide your own neutral analysis of the proposal\n2. The tool will then consult each specified model one by one\n3. You'll receive each model's response in subsequent steps\n4. Track and synthesize perspectives as they accumulate\n5. Final step: present comprehensive consensus and recommendations\n\nIMPORTANT: This workflow enforces sequential model consultation:\n- Step 1 is always your independent analysis\n- Each subsequent step processes one model response\n- Total steps = number of models (each step includes consultation + response)\n- Models can have stances (for/against/neutral) for structured debate\n- Same model can be used multiple times with different stances\n- Each model + stance combination must be unique\n\nPerfect for: complex decisions, architectural choices, feature proposals, technology evaluations, strategic planning.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "In step 1: Provide the EXACT question or proposal that ALL models will evaluate. This should be phrased as a clear question or problem statement, NOT as 'I will analyze...' or 'Let me examine...'. For example: 'Should we build a search component in SwiftUI for use in an AppKit app?' or 'Evaluate the proposal to migrate our database from MySQL to PostgreSQL'. This exact text will be sent to all models for their independent evaluation. In subsequent steps (2+): This field is for internal tracking only - you can provide notes about the model response you just received. This will NOT be sent to other models (they all receive the original proposal from step 1)."
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "The index of the current step in the consensus workflow, beginning at 1. Step 1 is your analysis, steps 2+ are for processing individual model responses."
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Total number of steps needed. This equals the number of models to consult. Step 1 includes your analysis + first model consultation on return of the call. Final step includes last model consultation + synthesis."
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Set to true if more models need to be consulted. False when ready for final synthesis."
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Files that are relevant to the consensus analysis. Include files that help understand the proposal, provide context, or contain implementation details."
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional list of image paths or base64 data URLs for visual context. Useful for UI/UX discussions, architecture diagrams, mockups, or any visual references that help inform the consensus analysis."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "findings": {
            "type": "string",
            "description": "In step 1: Provide YOUR OWN comprehensive analysis of the proposal/question. This is where you share your independent evaluation, considering technical feasibility, risks, benefits, and alternatives. This analysis is NOT sent to other models - it's recorded for the final synthesis. In steps 2+: Summarize the key points from the model response received, noting agreements and disagreements with previous analyses."
          },
          "models": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "model": {
                  "type": "string"
                },
                "stance": {
                  "type": "string",
                  "enum": [
                    "for",
                    "against",
                    "neutral"
                  ],
                  "default": "neutral"
                },
                "stance_prompt": {
                  "type": "string"
                }
              },
              "required": [
                "model"
              ]
            },
            "description": "List of model configurations to consult. Each can have a model name, stance (for/against/neutral), and optional custom stance prompt. The same model can be used multiple times with different stances, but each model + stance combination must be unique. Example: [{'model': 'o3', 'stance': 'for'}, {'model': 'o3', 'stance': 'against'}, {'model': 'flash', 'stance': 'neutral'}]"
          },
          "current_model_index": {
            "type": "integer",
            "minimum": 0,
            "description": "Internal tracking of which model is being consulted (0-based index). Used to determine which model to call next."
          },
          "model_responses": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Accumulated responses from models consulted so far. Internal field for tracking progress."
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required"
        ],
        "additionalProperties": false,
        "title": "ConsensusRequest"
      }
    },
    {
      "name": "debug",
      "description": "DEBUG & ROOT CAUSE ANALYSIS - Use this tool to perform any kind of debugging, bug hunting, or issue tracking. This tool guides you through a step-by-step investigation process where you:\n\n1. Start with step 1: describe the issue to investigate\n2. STOP and investigate using appropriate tools\n3. Report findings in step 2 with concrete evidence from actual code\n4. Continue investigating between each debug step\n5. Track findings, relevant files, and methods throughout\n6. Update hypotheses as understanding evolves\n7. Once investigation is complete, receive expert analysis\n\nIMPORTANT: This tool enforces investigation between steps:\n- After each debug call, you MUST investigate before calling debug again\n- Each step must include NEW evidence from code examination\n- No recursive debug calls without actual investigation work\n- The tool will specify which step number to use next\n- Follow the required_actions list for investigation guidance\n\nPerfect for: complex bugs, mysterious errors, performance issues, race conditions, memory leaks, integration problems.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "Describe what you're currently investigating by thinking deeply about the issue and its possible causes. In step 1, clearly state the issue and begin forming an investigative direction after thinking carefullyabout the described problem. Ask further questions from the user if you think these will help with yourunderstanding and investigation. CRITICAL: Remember that reported symptoms might originate from code far from where they manifest. Also be aware that after thorough investigation, you might find NO BUG EXISTS - it could be a misunderstanding or expectation mismatch. Consider not only obvious failures, but also subtle contributing factors like upstream logic, invalid inputs, missing preconditions, or hidden side effects. Map out the flow of related functions or modules. Identify call paths where input values or branching logic could cause instability. In concurrent systems, watch for race conditions, shared state, or timing dependencies. In all later steps, continue exploring with precision: trace deeper dependencies, verify hypotheses, and adapt your understanding as you uncover more evidence.IMPORTANT: When referring to code, use the relevant_files parameter to pass relevant files and only use the prompt to refer to function / method names or very small code snippets if absolutely necessary to explain the issue. Do NOT pass large code snippets in the prompt as this is exclusively reserved for descriptive text only. "
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "The index of the current step in the investigation sequence, beginning at 1. Each step should build upon or revise the previous one."
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Your current estimate for how many steps will be needed to complete the investigation. Adjust as new findings emerge. IMPORTANT: When continuation_id is provided (continuing a previous conversation), set this to 1 as we're not starting a new multi-step investigation."
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Set to true if you plan to continue the investigation with another step. False means you believe the root cause is known or the investigation is complete. IMPORTANT: When continuation_id is provided (continuing a previous conversation), set this to False to immediately proceed with expert analysis."
          },
          "findings": {
            "type": "string",
            "description": "Summarize everything discovered in this step. Include new clues, unexpected behavior, evidence from code or logs, or disproven theories. Be specific and avoid vague language—document what you now know and how it affects your hypothesis. IMPORTANT: If you find no evidence supporting the reported issue after thorough investigation, document this clearly. Finding 'no bug' is a valid outcome if the investigation was comprehensive. In later steps, confirm or disprove past findings with reason."
          },
          "files_checked": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List all files (as absolute paths, do not clip or shrink file names) examined during the investigation so far. Include even files ruled out, as this tracks your exploration path."
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Subset of files_checked (as full absolute paths) that contain code directly relevant to the issue. Only list those that are directly tied to the root cause or its effects. This could include the cause, trigger, or place of manifestation."
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "issues_found": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Issues identified with severity levels during work"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "exploring",
              "low",
              "medium",
              "high",
              "very_high",
              "almost_certain",
              "certain"
            ],
            "description": "Indicate your current confidence in the hypothesis. Use: 'exploring' (starting out), 'low' (early idea), 'medium' (some supporting evidence), 'high' (strong evidence), 'very_high' (very strong evidence), 'almost_certain' (nearly confirmed), 'certain' (200% confidence - root cause and minimal fix are both confirmed locally with no need for external model validation). Do NOT use 'certain' unless the issue can be fully resolved with a fix, use 'very_high' or 'almost_certain' instead when not 200% sure. Using 'certain' means you have ABSOLUTE confidence locally and prevents external model validation. Also do NOT set confidence to 'certain' if the user has strongly requested that external validation MUST be performed."
          },
          "hypothesis": {
            "type": "string",
            "description": "A concrete theory for what's causing the issue based on the evidence so far. This can include suspected failures, incorrect assumptions, or violated constraints. VALID HYPOTHESES INCLUDE: 'No bug found - possible user misunderstanding' or 'Symptoms appear unrelated to any code issue' if evidence supports this. When no bug is found, consider suggesting: 'Recommend discussing with thought partner/engineering assistant for clarification of expected behavior.' You are encouraged to revise or abandon hypotheses in later steps as needed based on evidence."
          },
          "backtrack_from_step": {
            "type": "integer",
            "minimum": 1,
            "description": "If an earlier finding or hypothesis needs to be revised or discarded, specify the step number from which to start over. Use this to acknowledge investigative dead ends and correct the course."
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "temperature": {
            "type": "number",
            "description": "Temperature for response (0.0 to 1.0). Lower values are more focused and deterministic, higher values are more creative. Tool-specific defaults apply if not specified.",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max). Higher modes enable deeper reasoning at the cost of speed."
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. When enabled, the model can request Claude to perform web searches and share results back during conversations. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional list of absolute paths to screenshots or UI visuals that clarify the issue. Only include if they materially assist understanding or hypothesis formulation."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings"
        ],
        "additionalProperties": false,
        "title": "DebugRequest"
      }
    },
    {
      "name": "docgen",
      "description": "COMPREHENSIVE DOCUMENTATION GENERATION - Step-by-step code documentation with expert analysis. This tool guides you through a systematic investigation process where you:\n\n1. Start with step 1: describe your documentation investigation plan\n2. STOP and investigate code structure, patterns, and documentation needs\n3. Report findings in step 2 with concrete evidence from actual code analysis\n4. Continue investigating between each step\n5. Track findings, relevant files, and documentation opportunities throughout\n6. Update assessments as understanding evolves\n7. Once investigation is complete, receive expert analysis\n\nIMPORTANT: This tool enforces investigation between steps:\n- After each call, you MUST investigate before calling again\n- Each step must include NEW evidence from code examination\n- No recursive calls without actual investigation work\n- The tool will specify which step number to use next\n- Follow the required_actions list for investigation guidance\n\nPerfect for: comprehensive documentation generation, code documentation analysis, complexity assessment, documentation modernization, API documentation.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "Current work step content and findings from your overall work"
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "Current step number in the work sequence (starts at 1)"
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Estimated total steps needed to complete the work"
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Whether another work step is needed after this one"
          },
          "findings": {
            "type": "string",
            "description": "Important findings, evidence and insights discovered in this step of the work"
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Files identified as relevant to the issue/goal"
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "issues_found": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Issues identified with severity levels during work"
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "document_complexity": {
            "type": "boolean",
            "default": true,
            "description": "Whether to include algorithmic complexity (Big O) analysis in function/method documentation. Default: true. When enabled, analyzes and documents the computational complexity of algorithms."
          },
          "document_flow": {
            "type": "boolean",
            "default": true,
            "description": "Whether to include call flow and dependency information in documentation. Default: true. When enabled, documents which methods this function calls and which methods call this function."
          },
          "update_existing": {
            "type": "boolean",
            "default": true,
            "description": "Whether to update existing documentation when it's found to be incorrect or incomplete. Default: true. When enabled, improves existing docs rather than just adding new ones."
          },
          "comments_on_complex_logic": {
            "type": "boolean",
            "default": true,
            "description": "Whether to add inline comments around complex logic within functions. Default: true. When enabled, adds explanatory comments for non-obvious algorithmic steps."
          },
          "num_files_documented": {
            "type": "integer",
            "default": 0,
            "minimum": 0,
            "description": "CRITICAL COUNTER: Number of files you have COMPLETELY documented so far. Start at 0. Increment by 1 only when a file is 100% documented (all functions/methods have documentation). This counter prevents premature completion - you CANNOT set next_step_required=false unless num_files_documented equals total_files_to_document."
          },
          "total_files_to_document": {
            "type": "integer",
            "default": 0,
            "minimum": 0,
            "description": "CRITICAL COUNTER: Total number of files discovered that need documentation in current directory. Set this in step 1 after discovering all files. This is the target number - when num_files_documented reaches this number, then and ONLY then can you set next_step_required=false. This prevents stopping after documenting just one file."
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings",
          "document_complexity",
          "document_flow",
          "update_existing",
          "comments_on_complex_logic",
          "num_files_documented",
          "total_files_to_document"
        ],
        "additionalProperties": false,
        "title": "DocgenRequest"
      }
    },
    {
      "name": "health",
      "description": "Report MCP/Provider health: configured providers, available models, and recent observability log tails.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "tail_lines": {
            "type": "integer",
            "default": 50
          }
        }
      }
    },
    {
      "name": "listmodels",
      "description": "LIST AVAILABLE MODELS - Display all AI models organized by provider. Shows which providers are configured, available models, their aliases, context windows, and capabilities. Useful for understanding what models can be used and their characteristics. MANDATORY: Must display full output to the user.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "model": {
            "type": "string",
            "description": "Model to use (ignored by listmodels tool)"
          }
        },
        "required": []
      }
    },
    {
      "name": "planner",
      "description": "INTERACTIVE SEQUENTIAL PLANNER - Break down complex tasks through step-by-step planning.\nExample: {\"step\":\"Outline goals and constraints\",\"step_number\":1,\"total_steps\":3,\"next_step_required\":true}.\n\nHow it works:\n- Start with step 1: describe the task/problem to plan\n- Continue with subsequent steps, building the plan piece by piece\n- Adjust total_steps estimate as you progress\n- Revise previous steps when new insights emerge\n- Branch into alternative approaches when needed\n- Add more steps even after reaching the initial estimate\n\nKey features: sequential thinking, deep reflection for complex plans, branching, revisions, dynamic steps.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "Your current planning step. For the first step, describe the task/problem to plan and be extremely expressive so that subsequent steps can break this down into simpler steps. For subsequent steps, provide the actual planning step content. Can include: regular planning steps, revisions of previous steps, questions about previous decisions, realizations about needing more analysis, changes in approach, etc."
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "Current step number in the work sequence (starts at 1)"
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Estimated total steps needed to complete the work"
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Whether another work step is needed after this one"
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "is_step_revision": {
            "type": "boolean",
            "description": "True if this step revises/replaces a previous step"
          },
          "revises_step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "If is_step_revision is true, which step number is being revised"
          },
          "is_branch_point": {
            "type": "boolean",
            "description": "True if this step branches from a previous step to explore alternatives"
          },
          "branch_from_step": {
            "type": "integer",
            "minimum": 1,
            "description": "If is_branch_point is true, which step number is the branching point"
          },
          "branch_id": {
            "type": "string",
            "description": "Identifier for the current branch (e.g., 'approach-A', 'microservices-path')"
          },
          "more_steps_needed": {
            "type": "boolean",
            "description": "True if more steps are needed beyond the initial estimate"
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required"
        ],
        "additionalProperties": true,
        "title": "PlannerRequest"
      }
    },
    {
      "name": "precommit",
      "description": "COMPREHENSIVE PRECOMMIT WORKFLOW - Step-by-step pre-commit validation with expert analysis. This tool guides you through a systematic investigation process where you:\n\n1. Start with step 1: describe your pre-commit validation plan\n2. STOP and investigate git changes, repository status, and file modifications\n3. Report findings in step 2 with concrete evidence from actual changes\n4. Continue investigating between each step\n5. Track findings, relevant files, and issues throughout\n6. Update assessments as understanding evolves\n7. Once investigation is complete, receive expert analysis\n\nIMPORTANT: This tool enforces investigation between steps:\n- After each call, you MUST investigate before calling again\n- Each step must include NEW evidence from git analysis\n- No recursive calls without actual investigation work\n- The tool will specify which step number to use next\n- Follow the required_actions list for investigation guidance\n\nPerfect for: comprehensive pre-commit validation, multi-repository analysis, security review, change impact assessment, completeness verification.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "Describe what you're currently investigating for pre-commit validation by thinking deeply about the changes and their potential impact. In step 1, clearly state your investigation plan and begin forming a systematic approach after thinking carefully about what needs to be validated. CRITICAL: Remember to thoroughly examine all git repositories, staged/unstaged changes, and understand the scope and intent of modifications. Consider not only immediate correctness but also potential future consequences, security implications, performance impacts, and maintainability concerns. Map out changed files, understand the business logic, and identify areas requiring deeper analysis. In all later steps, continue exploring with precision: trace dependencies, verify hypotheses, and adapt your understanding as you uncover more evidence.IMPORTANT: When referring to code, use the relevant_files parameter to pass relevant files and only use the prompt to refer to function / method names or very small code snippets if absolutely necessary to explain the issue. Do NOT pass large code snippets in the prompt as this is exclusively reserved for descriptive text only. "
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "The index of the current step in the pre-commit investigation sequence, beginning at 1. Each step should build upon or revise the previous one."
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Your current estimate for how many steps will be needed to complete the pre-commit investigation. Adjust as new findings emerge. IMPORTANT: When continuation_id is provided (continuing a previous conversation), set this to 1 as we're not starting a new multi-step investigation."
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Set to true if you plan to continue the investigation with another step. False means you believe the pre-commit analysis is complete and ready for expert validation. IMPORTANT: When continuation_id is provided (continuing a previous conversation), set this to False to immediately proceed with expert analysis."
          },
          "findings": {
            "type": "string",
            "description": "Summarize everything discovered in this step about the changes being committed. Include analysis of git diffs, file modifications, new functionality, potential issues identified, code quality observations, and security considerations. Be specific and avoid vague language—document what you now know about the changes and how they affect your assessment. IMPORTANT: Document both positive findings (good patterns, proper implementations) and concerns (potential bugs, missing tests, security risks). In later steps, confirm or update past findings with additional evidence."
          },
          "files_checked": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List all files (as absolute paths, do not clip or shrink file names) examined during the pre-commit investigation so far. Include even files ruled out or found to be unchanged, as this tracks your exploration path."
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Subset of files_checked (as full absolute paths) that contain changes or are directly relevant to the commit validation. Only list those that are directly tied to the changes being committed, their dependencies, or files that need validation. This could include modified files, related configuration, tests, or documentation."
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "issues_found": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "List of issues identified during the investigation. Each issue should be a dictionary with 'severity' (critical, high, medium, low) and 'description' fields. Include potential bugs, security concerns, performance issues, missing tests, incomplete implementations, etc."
          },
          "confidence": {
            "type": "string",
            "enum": [
              "exploring",
              "low",
              "medium",
              "high",
              "very_high",
              "almost_certain",
              "certain"
            ],
            "description": "Indicate your current confidence in the assessment. Use: 'exploring' (starting analysis), 'low' (early investigation), 'medium' (some evidence gathered), 'high' (strong evidence), 'very_high' (very strong evidence), 'almost_certain' (nearly complete validation), 'certain' (200% confidence - analysis is complete and all issues are identified with no need for external model validation). Do NOT use 'certain' unless the pre-commit validation is thoroughly complete, use 'very_high' or 'almost_certain' instead if not 200% sure. Using 'certain' means you have complete confidence locally and prevents external model validation. Also do NOT set confidence to 'certain' if the user has strongly requested that external validation MUST be performed."
          },
          "hypothesis": {
            "type": "string",
            "description": "Current theory about the issue/goal based on work"
          },
          "backtrack_from_step": {
            "type": "integer",
            "minimum": 1,
            "description": "If an earlier finding or assessment needs to be revised or discarded, specify the step number from which to start over. Use this to acknowledge investigative dead ends and correct the course."
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "temperature": {
            "type": "number",
            "description": "Temperature for response (0.0 to 1.0). Lower values are more focused and deterministic, higher values are more creative. Tool-specific defaults apply if not specified.",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max). Higher modes enable deeper reasoning at the cost of speed."
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. When enabled, the model can request Claude to perform web searches and share results back during conversations. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional list of absolute paths to screenshots, UI mockups, or visual references that help validate the changes. Only include if they materially assist understanding or assessment of the commit."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "path": {
            "type": "string",
            "description": "Starting absolute path to the directory to search for git repositories (must be FULL absolute paths - DO NOT SHORTEN)."
          },
          "compare_to": {
            "type": "string",
            "description": "Optional: A git ref (branch, tag, commit hash) to compare against. Check remote branches if local does not exist.If not provided, investigates local staged and unstaged changes."
          },
          "include_staged": {
            "type": "boolean",
            "default": true,
            "description": "Include staged changes in the investigation. Only applies if 'compare_to' is not set."
          },
          "include_unstaged": {
            "type": "boolean",
            "default": true,
            "description": "Include uncommitted (unstaged) changes in the investigation. Only applies if 'compare_to' is not set."
          },
          "focus_on": {
            "type": "string",
            "description": "Specific aspects to focus on (e.g., 'security implications', 'performance impact', 'test coverage')."
          },
          "severity_filter": {
            "type": "string",
            "enum": [
              "critical",
              "high",
              "medium",
              "low",
              "all"
            ],
            "default": "all",
            "description": "Minimum severity level to report on the changes."
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings"
        ],
        "additionalProperties": false,
        "title": "PrecommitRequest"
      }
    },
    {
      "name": "provider_capabilities",
      "description": "Summarize provider configuration and capabilities (keys presence only, active tools, key endpoints). Safe, no secrets.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "include_tools": {
            "type": "boolean",
            "default": true
          },
          "show_advanced": {
            "type": "boolean",
            "default": false
          },
          "invalidate_cache": {
            "type": "boolean",
            "default": false
          }
        }
      }
    },
    {
      "name": "refactor",
      "description": "COMPREHENSIVE REFACTORING WORKFLOW - Step-by-step refactoring analysis with expert validation. This tool guides you through a systematic investigation process where you:\n\n1. Start with step 1: describe your refactoring investigation plan\n2. STOP and investigate code structure, patterns, and potential improvements\n3. Report findings in step 2 with concrete evidence from actual code analysis\n4. Continue investigating between each step\n5. Track findings, relevant files, and refactoring opportunities throughout\n6. Update assessments as understanding evolves\n7. Once investigation is complete, receive expert analysis\n\nIMPORTANT: This tool enforces investigation between steps:\n- After each call, you MUST investigate before calling again\n- Each step must include NEW evidence from code examination\n- No recursive calls without actual investigation work\n- The tool will specify which step number to use next\n- Follow the required_actions list for investigation guidance\n\nPerfect for: comprehensive refactoring analysis, code smell detection, decomposition planning, modernization opportunities, organization improvements, maintainability enhancements.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "Describe what you're currently investigating for refactoring by thinking deeply about the code structure, patterns, and potential improvements. In step 1, clearly state your refactoring investigation plan and begin forming a systematic approach after thinking carefully about what needs to be analyzed. CRITICAL: Remember to thoroughly examine code quality, performance implications, maintainability concerns, and architectural patterns. Consider not only obvious code smells and issues but also opportunities for decomposition, modernization, organization improvements, and ways to reduce complexity while maintaining functionality. Map out the codebase structure, understand the business logic, and identify areas requiring refactoring. In all later steps, continue exploring with precision: trace dependencies, verify assumptions, and adapt your understanding as you uncover more refactoring opportunities.IMPORTANT: When referring to code, use the relevant_files parameter to pass relevant files and only use the prompt to refer to function / method names or very small code snippets if absolutely necessary to explain the issue. Do NOT pass large code snippets in the prompt as this is exclusively reserved for descriptive text only. "
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "The index of the current step in the refactoring investigation sequence, beginning at 1. Each step should build upon or revise the previous one."
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Your current estimate for how many steps will be needed to complete the refactoring investigation. Adjust as new opportunities emerge."
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Set to true if you plan to continue the investigation with another step. False means you believe the refactoring analysis is complete and ready for expert validation."
          },
          "findings": {
            "type": "string",
            "description": "Summarize everything discovered in this step about refactoring opportunities in the code. Include analysis of code smells, decomposition opportunities, modernization possibilities, organization improvements, architectural patterns, design decisions, potential performance optimizations, and maintainability enhancements. Be specific and avoid vague language—document what you now know about the code and how it could be improved. IMPORTANT: Document both positive aspects (good patterns, well-designed components) and improvement opportunities (code smells, overly complex functions, outdated patterns, organization issues). In later steps, confirm or update past findings with additional evidence."
          },
          "files_checked": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List all files (as absolute paths, do not clip or shrink file names) examined during the refactoring investigation so far. Include even files ruled out or found to need no refactoring, as this tracks your exploration path."
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Subset of files_checked (as full absolute paths) that contain code requiring refactoring or are directly relevant to the refactoring opportunities identified. Only list those that are directly tied to specific refactoring opportunities, code smells, decomposition needs, or improvement areas. This could include files with code smells, overly large functions/classes, outdated patterns, or organization issues."
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "issues_found": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "List of refactoring opportunities identified during the investigation. Each opportunity should be a dictionary with 'severity' (critical, high, medium, low), 'type' (codesmells, decompose, modernize, organization), and 'description' fields. Include code smells, decomposition opportunities, modernization possibilities, organization improvements, performance optimizations, maintainability enhancements, etc."
          },
          "confidence": {
            "type": "string",
            "enum": [
              "exploring",
              "incomplete",
              "partial",
              "complete"
            ],
            "default": "incomplete",
            "description": "Indicate your current confidence in the refactoring analysis completeness. Use: 'exploring' (starting analysis), 'incomplete' (just started or significant work remaining), 'partial' (some refactoring opportunities identified but more analysis needed), 'complete' (comprehensive refactoring analysis finished with all major opportunities identified and the CLI agent can handle 100% confidently without help). Use 'complete' ONLY when you have fully analyzed all code, identified all significant refactoring opportunities, and can provide comprehensive recommendations without expert assistance. When files are too large to read fully or analysis is uncertain, use 'partial'. Using 'complete' prevents expert analysis to save time and money. Do NOT set confidence to 'certain' if the user has strongly requested that external validation MUST be performed."
          },
          "hypothesis": {
            "type": "string",
            "description": "Current theory about the issue/goal based on work"
          },
          "backtrack_from_step": {
            "type": "integer",
            "minimum": 1,
            "description": "If an earlier finding or assessment needs to be revised or discarded, specify the step number from which to start over. Use this to acknowledge investigative dead ends and correct the course."
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "temperature": {
            "type": "number",
            "description": "Temperature for response (0.0 to 1.0). Lower values are more focused and deterministic, higher values are more creative. Tool-specific defaults apply if not specified.",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max). Higher modes enable deeper reasoning at the cost of speed."
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. When enabled, the model can request Claude to perform web searches and share results back during conversations. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional list of absolute paths to architecture diagrams, UI mockups, design documents, or visual references that help with refactoring context. Only include if they materially assist understanding or assessment."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "refactor_type": {
            "type": "string",
            "enum": [
              "codesmells",
              "decompose",
              "modernize",
              "organization"
            ],
            "default": "codesmells",
            "description": "Type of refactoring analysis to perform (codesmells, decompose, modernize, organization)"
          },
          "focus_areas": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Specific areas to focus on (e.g., 'performance', 'readability', 'maintainability', 'security')"
          },
          "style_guide_examples": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional existing code files to use as style/pattern reference (must be FULL absolute paths to real files / folders - DO NOT SHORTEN). These files represent the target coding style and patterns for the project."
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings"
        ],
        "additionalProperties": false,
        "title": "RefactorRequest"
      }
    },
    {
      "name": "secaudit",
      "description": "COMPREHENSIVE SECURITY AUDIT WORKFLOW - Step-by-step security assessment with expert analysis. This tool guides you through a systematic investigation process where you:\n\n1. Start with step 1: describe your security investigation plan\n2. STOP and investigate code structure, patterns, and security issues\n3. Report findings in step 2 with concrete evidence from actual code analysis\n4. Continue investigating between each step\n5. Track findings, relevant files, and security issues throughout\n6. Update assessments as understanding evolves\n7. Once investigation is complete, receive expert security analysis\n\nIMPORTANT: This tool enforces investigation between steps:\n- After each call, you MUST investigate before calling again\n- Each step must include NEW evidence from code examination\n- No recursive calls without actual investigation work\n- The tool will specify which step number to use next\n- Follow the required_actions list for investigation guidance\n\nPerfect for: comprehensive security assessment, OWASP Top 10 analysis, compliance evaluation, vulnerability identification, threat modeling, security architecture review.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "Describe what you're currently investigating for security audit by thinking deeply about security implications, threat vectors, and protection mechanisms. In step 1, clearly state your security audit plan and begin forming a systematic approach after identifying the application type, technology stack, and relevant security requirements. You must begin by passing the file path for the initial code you are about to audit in relevant_files. CRITICAL: Follow the OWASP Top 10 systematic checklist, examine authentication/authorization mechanisms, analyze input validation and data handling, assess dependency vulnerabilities, and evaluate infrastructure security. Consider not only obvious vulnerabilities but also subtle security gaps, configuration issues, design flaws, and compliance requirements. Map out the attack surface, understand the threat landscape, and identify areas requiring deeper security analysis. In all later steps, continue exploring with precision: trace security dependencies, verify security assumptions, and adapt your understanding as you uncover security evidence."
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "The index of the current step in the security audit sequence, beginning at 1. Each step should build upon or revise the previous one."
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Your current estimate for how many steps will be needed to complete the security audit. Adjust and increase as new security findings emerge."
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Set to true if you plan to continue the investigation with another step. False means you believe the security audit analysis is complete and ALL threats have been uncovered, ready for expert validation."
          },
          "findings": {
            "type": "string",
            "description": "Summarize everything discovered in this step about security aspects of the code being audited. Include analysis of security vulnerabilities, authentication/authorization issues, input validation gaps, encryption weaknesses, configuration problems, and compliance concerns. Be specific and avoid vague language—document what you now know about the security posture and how it affects your assessment. IMPORTANT: Document both positive security findings (proper implementations, good security practices) and concerns (vulnerabilities, security gaps, compliance issues). In later steps, confirm or update past findings with additional evidence."
          },
          "files_checked": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List all files (as absolute paths, do not clip or shrink file names) examined during the security audit investigation so far. Include even files ruled out or found to be unrelated, as this tracks your exploration path."
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "For when this is the first step, please pass absolute file paths of relevant code to audit (do not clip file paths). When used for the final step, this contains a subset of files_checked (as full absolute paths) that contain code directly relevant to the security audit or contain significant security issues, patterns, or examples worth highlighting. Only list those that are directly tied to important security findings, vulnerabilities, authentication issues, or security architectural decisions. This could include authentication modules, input validation files, configuration files, or files with notable security patterns."
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "issues_found": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "List of security issues identified during the investigation. Each issue should be a dictionary with 'severity' (critical, high, medium, low) and 'description' fields. Include security vulnerabilities, authentication bypasses, authorization flaws, injection vulnerabilities, cryptographic weaknesses, configuration issues, compliance gaps, etc."
          },
          "confidence": {
            "type": "string",
            "enum": [
              "exploring",
              "low",
              "medium",
              "high",
              "very_high",
              "almost_certain",
              "certain"
            ],
            "description": "Indicate your current confidence in the security audit assessment. Use: 'exploring' (starting analysis), 'low' (early investigation), 'medium' (some evidence gathered), 'high' (strong evidence), 'very_high' (very strong evidence), 'almost_certain' (nearly complete audit), 'certain' (100% confidence - security audit is thoroughly complete and all significant security issues are identified with no need for external model validation). Do NOT use 'certain' unless the security audit is comprehensively complete, use 'very_high' or 'almost_certain' instead if not 100% sure. Using 'certain' means you have complete confidence locally and prevents external model validation."
          },
          "hypothesis": {
            "type": "string",
            "description": "Current theory about the issue/goal based on work"
          },
          "backtrack_from_step": {
            "type": "integer",
            "minimum": 1,
            "description": "If an earlier finding or assessment needs to be revised or discarded, specify the step number from which to start over. Use this to acknowledge investigative dead ends and correct the course."
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "temperature": {
            "type": "number",
            "description": "Temperature for response (0.0 to 1.0). Lower values are more focused and deterministic, higher values are more creative. Tool-specific defaults apply if not specified.",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max). Higher modes enable deeper reasoning at the cost of speed."
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. When enabled, the model can request Claude to perform web searches and share results back during conversations. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional list of absolute paths to architecture diagrams, security models, threat models, or visual references that help with security audit context. Only include if they materially assist understanding or assessment of security posture."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "security_scope": {
            "type": "string",
            "description": "Define the security scope and application context (web app, mobile app, API, enterprise system, cloud service). Include technology stack, user types, data sensitivity, and threat landscape. This helps focus the security assessment appropriately."
          },
          "threat_level": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high",
              "critical"
            ],
            "default": "medium",
            "description": "Assess the threat level based on application context: 'low' (internal tools, low-risk data), 'medium' (customer-facing, business data), 'high' (financial, healthcare, regulated industry), 'critical' (payment processing, sensitive personal data). This guides prioritization."
          },
          "compliance_requirements": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List applicable compliance frameworks and security standards (SOC2, PCI DSS, HIPAA, GDPR, ISO 27001, NIST). Include industry-specific requirements that affect security controls."
          },
          "audit_focus": {
            "type": "string",
            "enum": [
              "owasp",
              "compliance",
              "infrastructure",
              "dependencies",
              "comprehensive"
            ],
            "default": "comprehensive",
            "description": "Primary security focus areas for this audit (owasp, compliance, infrastructure, dependencies)"
          },
          "severity_filter": {
            "type": "string",
            "enum": [
              "critical",
              "high",
              "medium",
              "low",
              "all"
            ],
            "default": "all",
            "description": "Minimum severity level to report on the security issues found"
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings"
        ],
        "additionalProperties": false,
        "title": "SecauditRequest"
      }
    },
    {
      "name": "testgen",
      "description": "COMPREHENSIVE TEST GENERATION - Creates thorough test suites with edge case coverage. Use this when you need to generate tests for code, create test scaffolding, or improve test coverage. BE SPECIFIC about scope: target specific functions/classes/modules rather than testing everything. Examples: 'Generate tests for User.login() method', 'Test payment processing validation', 'Create tests for authentication error handling'. If user request is vague, either ask for clarification about specific components to test, or make focused scope decisions and explain them. Analyzes code paths, identifies realistic failure modes, and generates framework-specific tests. Supports test pattern following when examples are provided. Choose thinking_mode based on code complexity: 'low' for simple functions, 'medium' for standard modules (default), 'high' for complex systems with many interactions, 'max' for critical systems requiring exhaustive test coverage. Note: If you're not currently using a top-tier model such as Opus 4 or above, these tools can provide enhanced capabilities.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "What to analyze or look for in this step. In step 1, describe what you want to test and begin forming an analytical approach after thinking carefully about what needs to be examined. Consider code structure, business logic, critical paths, edge cases, and potential failure modes. Map out the codebase structure, understand the functionality, and identify areas requiring test coverage. In later steps, continue exploring with precision and adapt your understanding as you uncover more insights about testable behaviors."
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "The index of the current step in the test generation sequence, beginning at 1. Each step should build upon or revise the previous one."
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Your current estimate for how many steps will be needed to complete the test generation analysis. Adjust as new findings emerge."
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Set to true if you plan to continue the investigation with another step. False means you believe the test generation analysis is complete and ready for expert validation."
          },
          "findings": {
            "type": "string",
            "description": "Summarize everything discovered in this step about the code being tested. Include analysis of functionality, critical paths, edge cases, boundary conditions, error handling, async behavior, state management, and integration points. Be specific and avoid vague language—document what you now know about the code and what test scenarios are needed. IMPORTANT: Document both the happy paths and potential failure modes. Identify existing test patterns if examples were provided. In later steps, confirm or update past findings with additional evidence."
          },
          "files_checked": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List all files (as absolute paths, do not clip or shrink file names) examined during the test generation investigation so far. Include even files ruled out or found to be unrelated, as this tracks your exploration path."
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Subset of files_checked (as full absolute paths) that contain code directly needing tests or are essential for understanding test requirements. Only list those that are directly tied to the functionality being tested. This could include implementation files, interfaces, dependencies, or existing test examples."
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "issues_found": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Issues identified with severity levels during work"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "exploring",
              "low",
              "medium",
              "high",
              "very_high",
              "almost_certain",
              "certain"
            ],
            "description": "Indicate your current confidence in the test generation assessment. Use: 'exploring' (starting analysis), 'low' (early investigation), 'medium' (some patterns identified), 'high' (strong understanding), 'very_high' (very strong understanding), 'almost_certain' (nearly complete test plan), 'certain' (100% confidence - test plan is thoroughly complete and all test scenarios are identified with no need for external model validation). Do NOT use 'certain' unless the test generation analysis is comprehensively complete, use 'very_high' or 'almost_certain' instead if not 100% sure. Using 'certain' means you have complete confidence locally and prevents external model validation."
          },
          "hypothesis": {
            "type": "string",
            "description": "Current theory about the issue/goal based on work"
          },
          "backtrack_from_step": {
            "type": "integer",
            "minimum": 1,
            "description": "If an earlier finding or assessment needs to be revised or discarded, specify the step number from which to start over. Use this to acknowledge investigative dead ends and correct the course."
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "temperature": {
            "type": "number",
            "description": "Temperature for response (0.0 to 1.0). Lower values are more focused and deterministic, higher values are more creative. Tool-specific defaults apply if not specified.",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max). Higher modes enable deeper reasoning at the cost of speed."
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. When enabled, the model can request Claude to perform web searches and share results back during conversations. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional list of absolute paths to architecture diagrams, flow charts, or visual documentation that help understand the code structure and test requirements. Only include if they materially assist test planning."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings"
        ],
        "additionalProperties": false,
        "title": "TestgenRequest"
      }
    },
    {
      "name": "thinkdeep",
      "description": "COMPREHENSIVE INVESTIGATION & REASONING - Multi-stage workflow for complex problem analysis. Use this when you need structured evidence-based investigation, systematic hypothesis testing, or expert validation. Perfect for: architecture decisions, complex bugs, performance challenges, security analysis. Provides methodical investigation with assumption validation, alternative solution exploration, and rigorous analysis. IMPORTANT: Choose the appropriate mode based on task complexity - 'low' for quick investigation, 'medium' for standard problems, 'high' for complex issues (default), 'max' for extremely complex challenges requiring exhaustive investigation. When in doubt, err on the side of a higher mode for thorough systematic analysis and expert validation. Note: If you're not currently using a top-tier model such as Opus 4 or above, these tools can provide enhanced capabilities.\nExample: {\"step\":\"Evaluate routing options\",\"step_number\":1,\"total_steps\":1,\"next_step_required\":false,\"model\":\"auto\"}.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "Current work step content and findings from your overall work"
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "Current step number in the work sequence (starts at 1)"
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Estimated total steps needed to complete the work"
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Whether another work step is needed after this one"
          },
          "findings": {
            "type": "string",
            "description": "Important findings, evidence and insights discovered in this step of the work"
          },
          "files_checked": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of files examined during this work step"
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Files identified as relevant to the issue/goal"
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "issues_found": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Issues identified with severity levels during work"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "exploring",
              "low",
              "medium",
              "high",
              "very_high",
              "almost_certain",
              "certain"
            ],
            "description": "Confidence level in findings: exploring (just starting), low (early investigation), medium (some evidence), high (strong evidence), very_high (comprehensive understanding), almost_certain (near complete confidence), certain (100% confidence locally - no external validation needed)"
          },
          "hypothesis": {
            "type": "string",
            "description": "Current theory about the issue/goal based on work"
          },
          "backtrack_from_step": {
            "type": "integer",
            "minimum": 1,
            "description": "Step number to backtrack from if work needs revision"
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "temperature": {
            "type": "number",
            "description": "Temperature for response (0.0 to 1.0). Lower values are more focused and deterministic, higher values are more creative. Tool-specific defaults apply if not specified.",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "thinking_mode": {
            "type": "string",
            "enum": [
              "minimal",
              "low",
              "medium",
              "high",
              "max"
            ],
            "description": "Thinking depth: minimal (0.5% of model max), low (8%), medium (33%), high (67%), max (100% of model max). Higher modes enable deeper reasoning at the cost of speed."
          },
          "use_websearch": {
            "type": "boolean",
            "description": "Enable web search for documentation, best practices, and current information. When enabled, the model can request Claude to perform web searches and share results back during conversations. Particularly useful for: brainstorming sessions, architectural design discussions, exploring industry best practices, working with specific frameworks/technologies, researching solutions to complex problems, or when current documentation and community insights would enhance the analysis.",
            "default": true
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional image(s) for visual context. Accepts absolute file paths or base64 data URLs. Only provide when user explicitly mentions images. When including images, please describe what you believe each image contains to aid with contextual understanding. Useful for UI discussions, diagrams, visual problems, error screens, architecture mockups, and visual analysis tasks."
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "problem_context": {
            "type": "string",
            "description": "Provide additional context about the problem or goal. Be as expressive as possible. More information will be very helpful for the analysis."
          },
          "focus_areas": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Specific aspects to focus on (architecture, performance, security, etc.)"
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings"
        ],
        "additionalProperties": false,
        "title": "ThinkdeepRequest"
      }
    },
    {
      "name": "tracer",
      "description": "STEP-BY-STEP CODE TRACING WORKFLOW - Systematic code analysis through guided investigation. This tool guides you through a structured investigation process where you:\n\n1. Start with step 1: describe your tracing plan and target\n2. STOP and investigate code structure, patterns, and relationships\n3. Report findings in step 2 with concrete evidence from actual code analysis\n4. Continue investigating between each step\n5. Track findings, relevant files, and code relationships throughout\n6. Build comprehensive understanding as analysis evolves\n7. Complete with detailed output formatted according to trace mode\n\nIMPORTANT: This tool enforces investigation between steps:\n- After each call, you MUST investigate before calling again\n- Each step must include NEW evidence from code examination\n- No recursive calls without actual investigation work\n- The tool will specify which step number to use next\n- Follow the required_actions list for investigation guidance\n\nTRACE MODES:\n- 'ask': Default mode - prompts you to choose between precision or dependencies modes with explanations\n- 'precision': For methods/functions - traces execution flow, call chains, and usage patterns\n- 'dependencies': For classes/modules - maps structural relationships and bidirectional dependencies\n\nPerfect for: method execution flow analysis, dependency mapping, call chain tracing, structural relationship analysis, architectural understanding, code comprehension.",
      "inputSchema": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "properties": {
          "step": {
            "type": "string",
            "description": "Current work step content and findings from your overall work"
          },
          "step_number": {
            "type": "integer",
            "minimum": 1,
            "description": "Current step number in the work sequence (starts at 1)"
          },
          "total_steps": {
            "type": "integer",
            "minimum": 1,
            "description": "Estimated total steps needed to complete the work"
          },
          "next_step_required": {
            "type": "boolean",
            "description": "Whether another work step is needed after this one"
          },
          "findings": {
            "type": "string",
            "description": "Important findings, evidence and insights discovered in this step of the work"
          },
          "files_checked": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of files examined during this work step"
          },
          "relevant_files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Files identified as relevant to the issue/goal"
          },
          "relevant_context": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Methods/functions identified as involved in the issue"
          },
          "confidence": {
            "type": "string",
            "enum": [
              "exploring",
              "low",
              "medium",
              "high",
              "very_high",
              "almost_certain",
              "certain"
            ],
            "description": "Confidence level in findings: exploring (just starting), low (early investigation), medium (some evidence), high (strong evidence), very_high (comprehensive understanding), almost_certain (near complete confidence), certain (100% confidence locally - no external validation needed)"
          },
          "use_assistant_model": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation."
          },
          "continuation_id": {
            "type": "string",
            "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools."
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional images of system architecture diagrams, flow charts, or visual references to help understand the tracing context"
          },
          "model": {
            "type": "string",
            "description": "Model to use. Native models: 'auto'. Use 'auto' to let the server select the best model. Defaults to 'glm-4.5-flash' if not specified."
          },
          "trace_mode": {
            "type": "string",
            "enum": [
              "precision",
              "dependencies",
              "ask"
            ],
            "description": "Type of tracing: 'ask' (default - prompts user to choose mode), 'precision' (execution flow) or 'dependencies' (structural relationships)"
          },
          "target_description": {
            "type": "string",
            "description": "Detailed description of what to trace and WHY you need this analysis. MUST include context about what you're trying to understand, debug, analyze or find."
          }
        },
        "required": [
          "step",
          "step_number",
          "total_steps",
          "next_step_required",
          "findings",
          "target_description",
          "trace_mode"
        ],
        "additionalProperties": false,
        "title": "TracerRequest"
      }
    },
    {
      "name": "version",
      "description": "VERSION & CONFIGURATION - Get server version, configuration details, and list of available tools. Useful for debugging and understanding capabilities.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "model": {
            "type": "string",
            "description": "Model to use (ignored by version tool)"
          }
        },
        "required": []
      }
    }
  ]
}